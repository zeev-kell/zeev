"use strict";angular.module("app.directive").directive("barMenu",["$animateCss","$timeout",function(a,e){return{restrict:"AE",controller:["$scope","$element",function(s,n){var l=this;l.collapse=function(e){var s=e.children("ul"),n=s.children();return s.hasClass("collapse")||s.hasClass("in")?(n.addClass("hidden-item"),s.css({height:s[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void a(s,{removeClass:"in",to:{height:"0"}}).start().finally(function(){s.css({height:"0"}).removeClass("collapsing").addClass("collapse"),n.removeClass("hidden-item"),e.removeClass("expanded")})):(s.css({height:"0"}).removeClass("collapsing").addClass("collapse"),void e.removeClass("expanded"))},l.expand=function(s){l.timeout&&e.cancel(l.timeout);var n=s.children("ul"),i=n.children();if(!n.hasClass("collapse")||!n.hasClass("in")){var t=s.siblings(".expanded");t.length>0&&l.collapse(t),s.addClass("expanded"),n.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),i.addClass("is-hidden"),a(n,{addClass:"in",easing:"ease",to:{height:n[0].scrollHeight+"px"}}).start().finally(function(){n.removeClass("collapsing").addClass("collapse").css({height:"auto"}),a(i,{addClass:"is-shown"}).start().finally(function(){i.removeClass("is-hidden is-shown")})})}}}],link:function(a,s,n,l){var i=angular.element(s).find("li:has(> ul)");i.addClass("has-sub"),i.each(function(a,e){e=angular.element(e),e.children("a").on("click",function(a){e.hasClass("expanded")?l.collapse(e):l.expand(e)})}),l.timeout=e(function(){var a=angular.element(s).find("li.active");a.length>0&&(a.parent().parent().parent().parent().parent().hasClass("main-menu")?(l.expand(a.parent().parent().parent().parent()),l.expand(a.parent().parent())):l.expand(a.parent().parent()))},1e3)}}}]);